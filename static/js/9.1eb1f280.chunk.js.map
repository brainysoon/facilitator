{"version":3,"sources":["shared/enhancers/withConnectedReactRouter.js","shared/styles/withAppBarStyles.js","shared/enhancers/withAppBar.js","election/actions/electionActions.js","election/pages/addElectorPage.jsx","election/styles/addElectorPageStyles.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","connected_react_router__WEBPACK_IMPORTED_MODULE_2__","withConnectedReactRouter","Component","connect","push","replace","go","goBack","goForward","props","a","createElement","withAppBarStyles","root","display","appBar","menuButton","marginLeft","marginRight","content","paddingTop","width","menuList","defaultOptions","shouldShowMenu","title","withAppBar","options","arguments","length","undefined","WithAppBar","_React$Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","open","_toggleDrawer","toggleState","setState","_renderMenuButton","classes","react_default","IconButton_default","className","color","aria-label","onClick","Menu_default","_renderBackButton","_this$props","ArrowBack_default","_handleItemClick","toPath","inherits","createClass","key","value","_this2","_this$props2","restProps","objectWithoutProperties","AppBar_default","Toolbar_default","Typography_default","variant","SwipeableDrawer_default","onClose","onOpen","List_default","ListItem_default","button","ListItemIcon_default","Add_default","ListItemText_default","primary","Divider_default","Settings_default","React","_","flowRight","withStyles","WithAppBarStyles","enhancers","ELECTION_START_ELECT","ElectionActionTypes","ELECTION_ADD_ELECTOR","ELECTION_FETCH_ELECTORS","fetchElectors","dispatch","localforage","getItem","then","electors","sortedElectors","chain","sort","name","toArray","type","response","catch","startElect","result","map","elector","_Users_xcsun_sugar_facilitator_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","random","weight","sortBy","first","addElector","toUpper","setItem","deleteElector","AddElectorPage","_handleSubmit","event","stopPropagation","preventDefault","formContainer","onSubmit","Input_default","placeholder","onChange","target","Button_default","size","mapDispathToProps","ElectionActions","justifyContent"],"mappings":"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","file":"static/js/9.1eb1f280.chunk.js","sourcesContent":["// @flow\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { push, replace, go, goBack, goForward } from 'connected-react-router';\n\nconst withConnectedReactRouter = (Component: *) => {\n  const WithConnectedReactRouter = (props: *) => <Component {...props} />;\n\n  return connect(\n    () => ({}),\n    { push, replace, go, goBack, goForward }\n  )(WithConnectedReactRouter);\n};\n\nexport default withConnectedReactRouter;\n","export default {\n  root: {\n    display: 'flex'\n  },\n  appBar: {},\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20\n  },\n  content: {\n    paddingTop: '4rem',\n    width: '100%'\n  },\n  menuList: {\n    width: '12rem'\n  }\n};\n","// @flow\n\nimport React from 'react';\nimport _ from 'lodash';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport AddIcon from '@material-ui/icons/Add';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\n\nimport WithAppBarStyles from '../styles/withAppBarStyles';\nimport withConnectedReactRouter from './withConnectedReactRouter';\n\ntype Props = {\n  classes: *\n};\n\ntype Options = {\n  shouldShowMenu: boolean,\n  title: string\n};\n\nconst defaultOptions = {\n  shouldShowMenu: true,\n  title: 'Unicorn'\n};\n\nconst withAppBar = (options: Options = defaultOptions) => {\n  const { shouldShowMenu, title } = options;\n\n  return Component => {\n    class WithAppBar extends React.Component<Props> {\n      state = {\n        open: false\n      };\n\n      _toggleDrawer = (toggleState: boolean) => () => {\n        this.setState({\n          open: toggleState\n        });\n      };\n\n      _renderMenuButton = () => {\n        const { classes } = this.props;\n\n        return (\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Menu\"\n            onClick={this._toggleDrawer(true)}\n          >\n            <MenuIcon />\n          </IconButton>\n        );\n      };\n\n      _renderBackButton = () => {\n        const { classes, goBack } = this.props;\n\n        return (\n          <IconButton\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"Back\"\n            onClick={goBack}\n          >\n            <ArrowBack />\n          </IconButton>\n        );\n      };\n\n      _handleItemClick = (toPath: string) => {\n        const { push } = this.props;\n\n        push && push(toPath);\n      };\n\n      render() {\n        const { classes, ...restProps } = this.props;\n        const { open } = this.state;\n\n        return (\n          <div className={classes.root}>\n            <AppBar className={classes.appBar}>\n              <Toolbar>\n                {shouldShowMenu\n                  ? this._renderMenuButton()\n                  : this._renderBackButton()}\n                <Typography variant=\"title\" color=\"inherit\">\n                  {title}\n                </Typography>\n              </Toolbar>\n            </AppBar>\n            <SwipeableDrawer\n              open={open}\n              onClose={this._toggleDrawer(false)}\n              onOpen={this._toggleDrawer(true)}\n            >\n              <div className={classes.menuList}>\n                <List>\n                  <ListItem\n                    onClick={() =>\n                      this._handleItemClick('/election/add/elector')\n                    }\n                    button\n                  >\n                    <ListItemIcon>\n                      <AddIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Add Elector\" />\n                  </ListItem>\n                </List>\n                <Divider />\n                <List>\n                  <ListItem\n                    onClick={() => this._handleItemClick('/settings/toggles')}\n                    button\n                  >\n                    <ListItemIcon>\n                      <SettingsIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Settings\" />\n                  </ListItem>\n                </List>\n              </div>\n            </SwipeableDrawer>\n            <div className={classes.content}>\n              <Component {...restProps} />\n            </div>\n          </div>\n        );\n      }\n    }\n\n    const enhancers = _.flowRight(\n      withStyles(WithAppBarStyles),\n      withConnectedReactRouter\n    );\n    return enhancers(WithAppBar);\n  };\n};\n\nexport default withAppBar;\n","import _ from 'lodash';\nimport { goBack } from 'connected-react-router';\nimport localforage from 'localforage';\n\nimport ElectionActionTypes from './electionActionTypes';\n\nconst {\n  ELECTION_START_ELECT,\n  ELECTION_ADD_ELECTOR,\n  ELECTION_FETCH_ELECTORS\n} = ElectionActionTypes;\n\nexport const fetchElectors = () => {\n  return dispatch => {\n    localforage\n      .getItem('electors')\n      .then(electors => {\n        const sortedElectors = _.chain(electors)\n          .sort(value => value.name)\n          .toArray()\n          .value();\n\n        dispatch({\n          type: ELECTION_FETCH_ELECTORS,\n          response: {\n            electors: sortedElectors\n          }\n        });\n      })\n      .catch(() => {});\n  };\n};\n\nexport const startElect = electors => {\n  const result = _.chain(electors)\n    .map(elector => ({\n      ...elector,\n      value: (_.random(0, 10) + elector.weight) % 10\n    }))\n    .sortBy(elector => elector.value)\n    .first()\n    .value();\n\n  return {\n    type: ELECTION_START_ELECT,\n    result\n  };\n};\n\nexport const addElector = elector => {\n  return dispatch => {\n    localforage\n      .getItem('electors')\n      .then(electors => {\n        !electors && (electors = {});\n\n        electors[_.toUpper(elector)] = {\n          name: elector,\n          weight: _.random(0, 3)\n        };\n        return localforage.setItem('electors', electors);\n      })\n      .then(electors => {\n        dispatch({\n          type: ELECTION_ADD_ELECTOR,\n          electors\n        });\n        dispatch(goBack());\n      })\n      .catch(() => {});\n  };\n};\n\nexport const deleteElector = elector => {\n  return dispatch => {\n    localforage\n      .getItem('electors')\n      .then(electors => {\n        delete electors[_.toUpper(elector.name)];\n        return localforage.setItem('electors', electors);\n      })\n      .then(() => {\n        dispatch(fetchElectors());\n      })\n      .catch(() => {});\n  };\n};\n","// @flow\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Input from '@material-ui/core/Input';\nimport Button from '@material-ui/core/Button';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport * as ElectionActions from '../actions/electionActions';\nimport withAppBar from '../../shared/enhancers/withAppBar';\nimport AddElectorPageStyles from '../styles/addElectorPageStyles';\n\ntype Props = {\n  classes: *,\n  addElector: () => void\n};\n\nclass AddElectorPage extends Component<Props> {\n  state = {\n    elector: ''\n  };\n\n  _handleSubmit = event => {\n    event && event.stopPropagation();\n    event && event.preventDefault();\n    const { addElector } = this.props;\n    const { elector } = this.state;\n\n    this.setState({ elector: '' });\n    addElector && addElector(elector);\n  };\n\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <form className={classes.formContainer} onSubmit={this._handleSubmit}>\n          <Input\n            value={this.state.elector}\n            placeholder=\"Name\"\n            onChange={event => {\n              this.setState({ elector: event.target.value });\n            }}\n          />\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            color=\"primary\"\n            type=\"submit\"\n          >\n            Submit\n          </Button>\n        </form>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({});\nconst mapDispathToProps = {\n  addElector: ElectionActions.addElector\n};\n\nconst enhancers = _.flowRight(\n  withAppBar({ shouldShowMenu: false, title: 'AddElector' }),\n  withStyles(AddElectorPageStyles),\n  connect(\n    mapStateToProps,\n    mapDispathToProps\n  )\n);\n\nexport default enhancers(AddElectorPage);\n","export default {\n  root: {},\n  formContainer: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  }\n};\n"],"sourceRoot":""}