(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,t){},122:function(e,t,n){e.exports=n(276)},127:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n.n(a),c=(n(127),n(0)),o=n.n(c),l=n(27),i=n(28),u=n(277),s=n(278),p=n(21),h=n(22),m=n(24),d=n(23),f=n(25),g=n(8),b=n.n(g),v=n(26),E=n(106),O=n.n(E),j=n(39),y=n.n(j),w=n(105),C=n.n(w),k=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._renderNextButton=function(){var e=n.props,t=e.handleNext,a=e.activeStep,r=e.steps;return o.a.createElement(y.a,{size:"small",onClick:t,disabled:a===r-1},o.a.createElement(C.a,null))},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.activeStep,a=e.steps;return o.a.createElement(O.a,{variant:"dots",steps:a,position:"bottom",activeStep:n,className:t.root,nextButton:this._renderNextButton()})}}]),t}(c.Component),_=b.a.flowRight(Object(v.withStyles)({root:{maxWidth:400,flexGrow:1,justifyContent:"center",background:"rgba(0, 0, 0, 0)"}}))(k),N=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(_,null))}}]),t}(c.Component),S="LANDING_FETCH_LANDING_PAGE",x="LANDING_FETCH_LANDING_STATUS",B=S,L=function(e){return Object(l.connect)(function(){return{}},{push:i.push,replace:i.replace,go:i.go,goBack:i.goBack,goForward:i.goForward})(function(t){return o.a.createElement(e,t)})},A=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={count:n.props.counter},n._hanleCount=function(){var e=n.state.count,t=n.props.handleDone,a=e-1;n.setState({count:a}),0===a&&(t&&t(),clearInterval(n.interval))},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this._hanleCount,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.classes,t=this.state.count;return o.a.createElement("div",{className:e.count},t)}}]),t}(c.Component),D=b.a.flowRight(Object(v.withStyles)(function(e){return{count:{border:"dashed white",position:"fixed",textAlign:"right",paddingLeft:"0.5rem",paddingRight:"0.5rem",margin:"1rem",fontSize:"1.5rem",color:e.palette.secondary.light,top:0,right:0,zIndex:1}}}))(A),I=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._handleNext=function(){n.props.push("/election/home")},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isFirstLanding,n=e.fetchLandingStatus,a=e.fetchLandingPage,r=e.push;t?r("/first/landing"):n(),a&&a()}},{key:"render",value:function(){var e=this.props,t=(e.brand,e.classes,e.counter);return o.a.createElement("div",null,o.a.createElement(D,{handleDone:this._handleNext,counter:t}))}}]),t}(c.Component),T={fetchLandingStatus:function(){return function(e){new Promise(function(e){return e({})}).then(function(t){e({type:x,value:t})})}},fetchLandingPage:function(){return{type:B}}},P=b.a.flowRight(Object(v.withStyles)({brand:{position:"fixed",top:0,left:0,right:0,bottom:0,maxWidth:"100%",maxHeight:"100%"}}),L,Object(l.connect)(function(e){return{isFirstLanding:b.a.get(e,"app.landing.isFirstLanding"),counter:b.a.get(e,"app.landing.landingPage.counter"),brand:b.a.get(e,"app.landing.landingPage.brand")}},T))(I),R=n(48),M=n.n(R),F=n(61),G=n.n(F),U=n(62),W=n.n(U),z=n(63),H=n.n(z),J=n(117),K=n.n(J),$=n(115),q=n.n($),Q=n(47),V=n.n(Q),X=n(116),Y=n.n(X),Z=n(121),ee=n(109),te=n.n(ee),ne=n(110),ae=n.n(ne),re=n(107),ce=n.n(re),oe=n(40),le=n.n(oe),ie=n(111),ue=n.n(ie),se=n(114),pe=n.n(se),he=n(112),me=n.n(he),de=n(113),fe=n.n(de),ge=n(108),be=n.n(ge),ve={root:{display:"flex"},appBar:{},menuButton:{marginLeft:-12,marginRight:20},content:{paddingTop:"4rem",width:"100%"},menuList:{width:"12rem"}},Ee={shouldShowMenu:!0},Oe=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee).shouldShowMenu;return function(t){var n=function(n){function a(){var e,t;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(m.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={open:!1},t._toggleDrawer=function(e){return function(){t.setState({open:e})}},t._renderMenuButton=function(){var e=t.props.classes;return o.a.createElement(V.a,{className:e.menuButton,color:"inherit","aria-label":"Menu",onClick:t._toggleDrawer(!0)},o.a.createElement(ce.a,null))},t._renderBackButton=function(){var e=t.props,n=e.classes,a=e.goBack;return o.a.createElement(V.a,{className:n.menuButton,color:"inherit","aria-label":"Back",onClick:a},o.a.createElement(be.a,null))},t._handleAddElector=function(){var e=t.props.push;e&&e("/election/add/elector")},t}return Object(f.a)(a,n),Object(h.a)(a,[{key:"render",value:function(){var n=this.props,a=n.classes,r=Object(Z.a)(n,["classes"]),c=this.state.open;return o.a.createElement("div",{className:a.root},o.a.createElement(te.a,{className:a.appBar},o.a.createElement(ae.a,null,e?this._renderMenuButton():this._renderBackButton(),o.a.createElement(le.a,{variant:"title",color:"inherit"},"Unicorn"))),o.a.createElement(ue.a,{open:c,onClose:this._toggleDrawer(!1),onOpen:this._toggleDrawer(!0)},o.a.createElement("div",{className:a.menuList},o.a.createElement(M.a,null,o.a.createElement(G.a,{onClick:this._handleAddElector,button:!0},o.a.createElement(me.a,null,o.a.createElement(fe.a,null)),o.a.createElement(W.a,{primary:"\u6dfb\u52a0\u65b0\u89d2\u8272"}))),o.a.createElement(pe.a,null),o.a.createElement(M.a,null))),o.a.createElement("div",{className:a.content},o.a.createElement(t,r)))}}]),a}(o.a.Component);return b.a.flowRight(Object(v.withStyles)(ve),L)(n)}},je=n(64),ye=n(41),we=n.n(ye),Ce="ELECTION_START_ELECT",ke="ELECTION_FETCH_ELECTORS",_e=Ce,Ne="ELECTION_ADD_ELECTOR",Se=ke,xe=function(){return function(e){we.a.getItem("electors").then(function(t){var n=b.a.chain(t).sort(function(e){return e.name}).toArray().value();e({type:Se,response:{electors:n}})}).catch(function(){})}},Be=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._handleElect=function(){var e=n.props,t=e.electors,a=e.startElect,r=e.push;a&&a(t),r("/election/result")},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchElectors;e&&e()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.electors,a=e.deleteElector;return o.a.createElement("div",{className:t.root},o.a.createElement(M.a,null,b.a.map(n,function(e,t){return o.a.createElement(G.a,{key:t},o.a.createElement(H.a,null,b.a.upperCase(e.name[0])),o.a.createElement(W.a,{primary:e.name}),o.a.createElement(q.a,null,o.a.createElement(V.a,{"aria-label":"Delete",onClick:function(){return a(e)}},o.a.createElement(Y.a,null))))})),o.a.createElement("div",{className:t.bottomKit},o.a.createElement(y.a,{variant:"extendedFab",color:"primary",onClick:this._handleElect},o.a.createElement(K.a,null),"\u5f00\u59cb\u968f\u673a")))}}]),t}(c.Component),Le={startElect:function(e){var t=b.a.chain(e).map(function(e){return Object(je.a)({},e,{value:(b.a.random(0,10)+e.weight)%10})}).sortBy(function(e){return e.value}).first().value();return{type:_e,result:t}},fetchElectors:xe,deleteElector:function(e){return function(t){we.a.getItem("electors").then(function(t){return delete t[b.a.toUpper(e.name)],we.a.setItem("electors",t)}).then(function(){t(xe())}).catch(function(){})}}},Ae=b.a.flowRight(Oe(),Object(v.withStyles)({root:{display:"flex",flexDirection:"column",width:"100%"},bottomKit:{display:"flex",justifyContent:"center",width:"100%",position:"fixed",bottom:"0.5rem"}}),L,Object(l.connect)(function(e){return{electors:function(e){return b.a.get(e,"app.election.homePage.response.electors")}(e)}},Le))(Be),De=n(46),Ie=n.n(De),Te=(n(261),function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.result,n=e.classes;return o.a.createElement("div",{className:n.root},o.a.createElement(H.a,{className:n.resultAvatar},b.a.upperCase(t.name?t.name[0]:":)")),o.a.createElement(Ie.a,{className:n.resultDescContainer,elevation:5},o.a.createElement(le.a,{variant:"h5",omponent:"h3"},"The facilitator is ".concat(t.name)),o.a.createElement(le.a,{component:"p"},"Please remember to take the ownership :)")))}}]),t}(c.Component)),Pe=b.a.flowRight(Oe({shouldShowMenu:!1}),Object(v.withStyles)(function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},resultAvatar:{margin:"1rem"},resultDescContainer:Object(je.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}}),Object(l.connect)(function(e){return{result:function(e){return b.a.get(e,"app.election.resultPage.result")}(e)}},{}))(Te),Re=n(118),Me=n.n(Re),Fe=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={elector:""},n._handleSubmit=function(){var e=n.props.addElector,t=n.state.elector;n.setState({elector:""}),e&&e(t)},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement("form",{className:t.formContainer,onSubmit:this._handleSubmit},o.a.createElement(Me.a,{value:this.state.elector,placeholder:"\u59d3\u540d",onChange:function(t){e.setState({elector:t.target.value})}}),o.a.createElement(y.a,{variant:"contained",size:"large",color:"primary",type:"submit"},"\u6dfb\u52a0")))}}]),t}(c.Component),Ge={addElector:function(e){return function(t){we.a.getItem("electors").then(function(t){return!t&&(t={}),t[b.a.toUpper(e)]={name:e,weight:b.a.random(0,3)},we.a.setItem("electors",t)}).then(function(e){t({type:Ne,electors:e}),t(Object(i.goBack)())}).catch(function(){})}}},Ue=b.a.flowRight(Oe({shouldShowMenu:!1}),Object(v.withStyles)({root:{},formContainer:{display:"flex",justifyContent:"space-around"}}),Object(l.connect)(function(e){return{}},Ge))(Fe),We=o.a.createElement(u.a,null,o.a.createElement(s.a,{path:"/election",component:function(e){var t=e.match;return o.a.createElement(u.a,null,o.a.createElement(s.a,{path:"".concat(t.url,"/home"),component:Ae}),o.a.createElement(s.a,{path:"".concat(t.url,"/result"),component:Pe}),o.a.createElement(s.a,{path:"".concat(t.url,"/add/elector"),component:Ue}))}}),o.a.createElement(s.a,{path:"/",component:function(){return o.a.createElement(u.a,null,o.a.createElement(s.a,{exact:!0,path:"/",component:P}),o.a.createElement(s.a,{path:"/first/landing",component:N}))}})),ze=n(18),He=n(119),Je=S,Ke=n(120),$e=n.n(Ke),qe=Object(ze.c)({landingPage:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Je:default:return{counter:3,brand:"https://up.enterdesk.com/edpic/76/54/b2/7654b28b1df8bed811dba6e29f3b2840.jpg"}}},firstLandingPage:$e.a}),Qe=ke,Ve=Object(ze.c)({response:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return t.response;default:return e}}}),Xe=Ce,Ye={},Ze=Object(ze.c)({result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return t.result;default:return e}}}),et=Object(ze.c)({homePage:Ve,resultPage:Ze}),tt=Object(ze.c)({landing:qe,election:et}),nt=Object(ze.c)({app:tt}),at=n(29),rt=Object(at.a)(),ct=ze.d,ot=Object(ze.e)(Object(i.connectRouter)(rt)(nt),ct(Object(ze.a)(Object(i.routerMiddleware)(rt),He.a))),lt=o.a.createElement(l.Provider,{store:ot},o.a.createElement(i.ConnectedRouter,{history:rt},We));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(lt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[122,2,1]]]);
//# sourceMappingURL=main.2c924eb8.chunk.js.map