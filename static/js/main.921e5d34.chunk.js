(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t){},117:function(e,t,n){e.exports=n(261)},122:function(e,t,n){},261:function(e,t,n){"use strict";n.r(t);var a=n(29),r=n.n(a),c=(n(122),n(0)),o=n.n(c),l=n(26),i=n(27),u=n(262),s=n(263),h=n(21),p=n(22),m=n(24),d=n(23),f=n(25),g=n(8),b=n.n(g),v=n(30),E=n(101),O=n.n(E),j=n(38),y=n.n(j),w=n(100),k=n.n(w),_=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._renderNextButton=function(){var e=n.props,t=e.handleNext,a=e.activeStep,r=e.steps;return o.a.createElement(y.a,{size:"small",onClick:t,disabled:a===r-1},o.a.createElement(k.a,null))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.activeStep,a=e.steps;return o.a.createElement(O.a,{variant:"dots",steps:a,position:"bottom",activeStep:n,className:t.root,nextButton:this._renderNextButton()})}}]),t}(c.Component),C=b.a.flowRight(Object(v.withStyles)({root:{maxWidth:400,flexGrow:1,justifyContent:"center",background:"rgba(0, 0, 0, 0)"}}))(_),N=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(C,null))}}]),t}(c.Component),S="LANDING_FETCH_LANDING_PAGE",x="LANDING_FETCH_LANDING_STATUS",B=S,L=function(e){return Object(l.connect)(function(){return{}},{push:i.push,replace:i.replace,go:i.go,goBack:i.goBack,goForward:i.goForward})(function(t){return o.a.createElement(e,t)})},A=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={count:n.props.counter},n._hanleCount=function(){var e=n.state.count,t=n.props.handleDone,a=e-1;n.setState({count:a}),0===a&&(t&&t(),clearInterval(n.interval))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.interval=setInterval(this._hanleCount,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.classes,t=this.state.count;return o.a.createElement("div",{className:e.count},t)}}]),t}(c.Component),D=b.a.flowRight(Object(v.withStyles)(function(e){return{count:{border:"dashed white",position:"fixed",textAlign:"right",paddingLeft:"0.5rem",paddingRight:"0.5rem",margin:"1rem",fontSize:"1.5rem",color:e.palette.secondary.light,top:0,right:0,zIndex:1}}}))(A),I=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._handleNext=function(){n.props.push("/election/home")},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isFirstLanding,n=e.fetchLandingStatus,a=e.fetchLandingPage,r=e.push;t?r("/first/landing"):n(),a&&a()}},{key:"render",value:function(){var e=this.props,t=e.brand,n=e.classes,a=e.counter;return o.a.createElement("div",null,o.a.createElement("img",{className:n.brand,src:t}),o.a.createElement(D,{handleDone:this._handleNext,counter:a}))}}]),t}(c.Component),R={fetchLandingStatus:function(){return function(e){new Promise(function(e){return e({})}).then(function(t){e({type:x,value:t})})}},fetchLandingPage:function(){return{type:B}}},T=b.a.flowRight(Object(v.withStyles)({brand:{position:"fixed",top:0,left:0,right:0,bottom:0,maxWidth:"100%",maxHeight:"100%"}}),L,Object(l.connect)(function(e){return{isFirstLanding:b.a.get(e,"app.landing.isFirstLanding"),counter:b.a.get(e,"app.landing.landingPage.counter"),brand:b.a.get(e,"app.landing.landingPage.brand")}},R))(I),P=n(44),M=n.n(P),F=n(57),G=n.n(F),W=n(58),H=n.n(W),U=n(110),z=n.n(U),J=n(111),K=n.n(J),$=n(115),q=n(104),Q=n.n(q),V=n(105),X=n.n(V),Y=n(73),Z=n.n(Y),ee=n(102),te=n.n(ee),ne=n(72),ae=n.n(ne),re=n(106),ce=n.n(re),oe=n(109),le=n.n(oe),ie=n(107),ue=n.n(ie),se=n(108),he=n.n(se),pe=n(103),me=n.n(pe),de={root:{display:"flex"},appBar:{},menuButton:{marginLeft:-12,marginRight:20},content:{paddingTop:"4rem",width:"100%"},menuList:{width:"12rem"}},fe={shouldShowMenu:!0},ge=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe).shouldShowMenu;return function(t){var n=function(n){function a(){var e,t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(m.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={open:!1},t._toggleDrawer=function(e){return function(){t.setState({open:e})}},t._renderMenuButton=function(){var e=t.props.classes;return o.a.createElement(Z.a,{className:e.menuButton,color:"inherit","aria-label":"Menu",onClick:t._toggleDrawer(!0)},o.a.createElement(te.a,null))},t._renderBackButton=function(){var e=t.props,n=e.classes,a=e.goBack;return o.a.createElement(Z.a,{className:n.menuButton,color:"inherit","aria-label":"Back",onClick:a},o.a.createElement(me.a,null))},t._handleAddElector=function(){var e=t.props.push;e&&e("/election/add/elector")},t}return Object(f.a)(a,n),Object(p.a)(a,[{key:"render",value:function(){var n=this.props,a=n.classes,r=Object($.a)(n,["classes"]),c=this.state.open;return o.a.createElement("div",{className:a.root},o.a.createElement(Q.a,{className:a.appBar},o.a.createElement(X.a,null,e?this._renderMenuButton():this._renderBackButton(),o.a.createElement(ae.a,{variant:"title",color:"inherit"},"Unicorn"))),o.a.createElement(ce.a,{open:c,onClose:this._toggleDrawer(!1),onOpen:this._toggleDrawer(!0)},o.a.createElement("div",{className:a.menuList},o.a.createElement(M.a,null,o.a.createElement(G.a,{onClick:this._handleAddElector,button:!0},o.a.createElement(ue.a,null,o.a.createElement(he.a,null)),o.a.createElement(H.a,{primary:"\u6dfb\u52a0\u65b0\u89d2\u8272"}))),o.a.createElement(le.a,null),o.a.createElement(M.a,null))),o.a.createElement("div",{className:a.content},o.a.createElement(t,r)))}}]),a}(o.a.Component);return b.a.flowRight(Object(v.withStyles)(de),L)(n)}},be=n(116),ve=n(59),Ee=n.n(ve),Oe="ELECTION_START_ELECT",je="ELECTION_FETCH_ELECTORS",ye=Oe,we="ELECTION_ADD_ELECTOR",ke=je,_e=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r))))._handleElect=function(){var e=n.props,t=e.electors,a=e.startElect,r=e.push;a&&a(t),r("/election/result")},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.fetchElectors;e&&e()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.electors;return o.a.createElement("div",{className:t.root},o.a.createElement(M.a,null,b.a.map(n,function(e,t){return o.a.createElement(G.a,{key:t},o.a.createElement(z.a,null,b.a.upperCase(e.name[0])),o.a.createElement(H.a,{primary:e.name}))})),o.a.createElement("div",{className:t.bottomKit},o.a.createElement(y.a,{variant:"extendedFab",color:"primary",onClick:this._handleElect},o.a.createElement(K.a,null),"\u5f00\u59cb\u968f\u673a")))}}]),t}(c.Component),Ce={startElect:function(e){var t=b.a.chain(e).map(function(e){return Object(be.a)({},e,{value:(b.a.random(0,10)+e.weight)%10})}).sortBy(function(e){return e.value}).first().value();return{type:ye,result:t}},fetchElectors:function(){return function(e){Ee.a.getItem("electors").then(function(t){var n=b.a.chain(t).sort(function(e){return e.name}).toArray().value();e({type:ke,response:{electors:n}})}).catch(function(){})}}},Ne=b.a.flowRight(ge(),Object(v.withStyles)({root:{display:"flex",flexDirection:"column",width:"100%"},bottomKit:{display:"flex",justifyContent:"center",width:"100%",position:"fixed",bottom:"0.5rem"}}),L,Object(l.connect)(function(e){return{electors:function(e){return b.a.get(e,"app.election.homePage.response.electors")}(e)}},Ce))(_e),Se=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.result;return o.a.createElement("div",null,e.name)}}]),t}(c.Component),xe=b.a.flowRight(ge({shouldShowMenu:!1}),Object(l.connect)(function(e){return{result:function(e){return b.a.get(e,"app.election.resultPage.result")}(e)}},{}))(Se),Be=n(112),Le=n.n(Be),Ae=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={elector:""},n._handleSubmit=function(){var e=n.props.addElector,t=n.state.elector;n.setState({elector:""}),e&&e(t)},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Le.a,{value:this.state.elector,onChange:function(t){e.setState({elector:t.target.value})}}),o.a.createElement(y.a,{onClick:this._handleSubmit},"\u6dfb\u52a0"))}}]),t}(c.Component),De={addElector:function(e){return function(t){Ee.a.getItem("electors").then(function(t){return!t&&(t={}),t[b.a.toUpper(e)]={name:e,weight:b.a.random(0,3)},Ee.a.setItem("electors",t)}).then(function(e){t({type:we,electors:e}),t(Object(i.goBack)())}).catch(function(){})}}},Ie=b.a.flowRight(ge({shouldShowMenu:!1}),Object(l.connect)(function(e){return{}},De))(Ae),Re=o.a.createElement(u.a,null,o.a.createElement(s.a,{path:"/election",component:function(e){var t=e.match;return o.a.createElement(u.a,null,o.a.createElement(s.a,{path:"".concat(t.url,"/home"),component:Ne}),o.a.createElement(s.a,{path:"".concat(t.url,"/result"),component:xe}),o.a.createElement(s.a,{path:"".concat(t.url,"/add/elector"),component:Ie}))}}),o.a.createElement(s.a,{path:"/",component:function(){return o.a.createElement(u.a,null,o.a.createElement(s.a,{exact:!0,path:"/",component:T}),o.a.createElement(s.a,{path:"/first/landing",component:N}))}})),Te=n(18),Pe=n(113),Me=S,Fe=n(114),Ge=n.n(Fe),We=Object(Te.c)({landingPage:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case Me:default:return{counter:6,brand:"https://up.enterdesk.com/edpic/76/54/b2/7654b28b1df8bed811dba6e29f3b2840.jpg"}}},firstLandingPage:Ge.a}),He=je,Ue=Object(Te.c)({response:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:return t.response;default:return e}}}),ze=Oe,Je={},Ke=Object(Te.c)({result:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:return t.result;default:return e}}}),$e=Object(Te.c)({homePage:Ue,resultPage:Ke}),qe=Object(Te.c)({landing:We,election:$e}),Qe=Object(Te.c)({app:qe}),Ve=n(28),Xe=Object(Ve.a)(),Ye=Te.d,Ze=Object(Te.e)(Object(i.connectRouter)(Xe)(Qe),Ye(Object(Te.a)(Object(i.routerMiddleware)(Xe),Pe.a))),et=o.a.createElement(l.Provider,{store:Ze},o.a.createElement(i.ConnectedRouter,{history:Xe},Re));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(et,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[117,2,1]]]);
//# sourceMappingURL=main.921e5d34.chunk.js.map